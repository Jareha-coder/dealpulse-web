<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>DealPulse — UAE Flash Deals</title>
<meta name="description" content="DealPulse — Latest UAE flash deals, restocks, and verified offers. Join our VIP Telegram for instant alerts." />
<style>
  :root{--bg:#0f1724;--card:#0b1220;--accent:#20c997;color:#e6eef6}
  body{margin:0;font-family:Inter,system-ui,Arial;background:var(--bg);color:var(--accent)}
  header{padding:20px;text-align:center}
  h1{margin:0;font-size:22px}
  p.lead{margin:6px 0 0;color:#98d5cc;font-size:13px}
  .container{max-width:1100px;margin:12px auto;padding:0 12px}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:14px}
  .card{background:var(--card);border-radius:10px;padding:10px;box-shadow:0 6px 18px rgba(0,0,0,.6);display:flex;flex-direction:column}
  .thumb{height:160px;border-radius:8px;background:#081018;display:flex;align-items:center;justify-content:center;overflow:hidden}
  .thumb img{width:100%;height:100%;object-fit:cover}
  .meta{padding:8px 4px;flex:1;display:flex;flex-direction:column}
  .meta h3{margin:0 0 6px;font-size:16px}
  .meta p{margin:0;color:#94c7bf;font-size:13px}
  .row{display:flex;gap:8px;align-items:center}
  .btn{display:inline-block;padding:8px 10px;border-radius:6px;text-decoration:none;background:var(--accent);color:#032020;font-weight:700;font-size:13px}
  .tag{background:#132226;padding:6px 8px;border-radius:6px;font-size:12px;color:#9de1cf}
  .featured{border:3px solid rgba(32,201,151,0.12)}
  footer{color:#88bdb4;text-align:center;padding:18px;font-size:13px}
  .topbar{display:flex;justify-content:space-between;align-items:center;gap:8px;flex-wrap:wrap}
  @media (max-width:520px){.thumb{height:110px}}
</style>
</head>
<body>
<header>
  <div class="container topbar">
    <div>
      <h1>DealPulse</h1>
      <p class="lead">UAE flash deals, restocks & verified offers — curated & sent fast.</p>
    </div>
    <div style="text-align:right">
      <a id="vipBtn" class="btn" href="#">Join VIP Alerts</a>
      <a id="featureBtn" class="btn" href="#" style="background:#ffd166">Feature your deal</a>
    </div>
  </div>
</header>

<main class="container">
  <section id="featuredSection" style="margin-bottom:16px"></section>
  <section>
    <h2 style="color:#bfeee0">Latest deals</h2>
    <div class="grid" id="dealsGrid"></div>
  </section>
</main>

<footer>Want your deal featured? Click <a id="featureLink" href="#">here</a> — or email: your@youremail.com — Tip jar: <a href="#" style="color:#ffd166">Buy me a coffee</a></footer>

<script>
  const PAYPAL_LINK = 'https://www.paypal.me/yourlink'; // CHANGE to your PayPal.Me link
  const VIP_LINK = 'https://www.buymeacoffee.com/yourlink'; // optional

  document.getElementById('vipBtn').href = VIP_LINK;
  document.getElementById('featureBtn').href = PAYPAL_LINK;
  document.getElementById('featureLink').href = PAYPAL_LINK;

  async function loadDeals(){
    try{
      const res = await fetch('data/deals.json', {cache:'no-store'});
      const data = await res.json();
      // featured first
      const featured = data.filter(d => d.featured).sort((a,b)=> new Date(b.ts)-new Date(a.ts));
      const normal = data.filter(d => !d.featured).sort((a,b)=> new Date(b.ts)-new Date(a.ts));

      const featContainer = document.getElementById('featuredSection');
      if(featured.length){
        const f = featured[0];
        featContainer.innerHTML = `
          <div class="card featured" style="padding:14px;display:flex;gap:12px;align-items:center">
            <div style="width:160px"><div class="thumb"><img src="${f.image||'https://via.placeholder.com/320x180?text=Deal'}" alt=""></div></div>
            <div style="flex:1">
              <h3 style="margin:0">${f.title} <span class="tag">FEATURED</span></h3>
              <p style="margin:8px 0">${f.desc}</p>
              <div style="margin-top:8px" class="row">
                <a class="btn" href="${f.link}" target="_blank" rel="noopener">Buy / View</a>
                <div style="color:#94c7bf">Price: ${f.price||'—'}</div>
                <div style="margin-left:auto;color:#9fbfb1;font-size:12px">${new Date(f.ts).toLocaleString()}</div>
              </div>
            </div>
          </div>
        `;
      }

      const grid = document.getElementById('dealsGrid');
      grid.innerHTML = '';
      normal.forEach(d=>{
        const el = document.createElement('div'); el.className='card';
        el.innerHTML = `
          <div class="thumb"><img src="${d.image||'https://via.placeholder.com/320x180?text=Deal'}" alt=""></div>
          <div class="meta">
            <h3>${d.title}</h3>
            <p>${d.desc}</p>
            <div style="margin-top:auto;display:flex;gap:8px;align-items:center">
              <a class="btn" href="${d.link}" target="_blank">Buy / View</a>
              <div style="color:#94c7bf">Price: ${d.price||'—'}</div>
              <div style="margin-left:auto;color:#9fbfb1;font-size:12px">${new Date(d.ts).toLocaleString()}</div>
            </div>
          </div>
        `;
        grid.appendChild(el);
      });
    }catch(err){
      console.error(err);
      document.getElementById('dealsGrid').innerHTML = '<div style="color:#c7e9df">Error loading deals.json</div>';
    }
  }

  loadDeals();
</script>
</body>
</html>
